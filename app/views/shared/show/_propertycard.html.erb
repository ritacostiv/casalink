<!-- app/views/shared/show/_propertycard.html.erb -->
<!-- Property Card- Left Column -->
<div class="property-card">
  <div class="property-content">
    <!-- Images-->
    <div class="property-image">
      <img src="https://img4.idealista.pt/blur/WEB_DETAIL_TOP-L-P/0/id.pro.pt.image.master/59/57/02/278189286.jpg" alt="Kitchen">
      <div class="image-dots">
        <span></span>
        <span class="inactive"></span>
        <span class="inactive"></span>
      </div>
    </div>

    <!-- Property details container -->
    <div class="property-details">
      <div class="property-header">
        <div class="property-title-container">
          <h2 class="property-title"><%= property.name %></h2>
          <span class="location-pin" data-address="<%= property.address %>">ğŸ“</span>
          <div class="delete-property-button">
            <%= button_to "ğŸ—‘ï¸",
              collection_property_path(property.collection, property),
              method: :delete,
              form: {
                data: {
                  turbo_confirm: "Are you sure you want to delete this property?",
                  turbo_method: :delete
                }
              },
              class: "delete-btn",
              style: "text-decoration: none; color: #666666; font-size: 15px; background: none; border: none; padding: 0;"
            %>
          </div>
          <div class="property-rating">4.5/5</div>
        </div>
      </div>

        <!-- Edit Details  -->
        <div class="edit-details-button">
        <!--old <a href="#" style="color:rgb(235, 110, 8); text-decoration: none; font-size: 14px;">
        Edit Details</a>-->
         <a href="#" data-bs-toggle="modal" data-bs-target="#editPropertyModal<%= property.id %>" style="color:rgb(235, 110, 8); text-decoration: none; font-size: 12px;">
        âœï¸ Edit</a>
        </div>

        <!-- Amenities -->
        <div class="property-amenities-row">
        <span class="property-amenities-tag">â‚¬<%= number_with_delimiter(property.price.to_s.gsub(/[^\d.]/, '').to_f.round) %></span>
        <span class="property-amenities-tag"><%= property.size %>mÂ²</span>
        </div>

        <div class="property-amenities-row">
        <span class="property-amenities-tag">T<%= property.typology %></span>
        <span class="property-amenities-tag"><%= property.elevator ? "âœ… Elevator" : "âŒ Elevator" %></span>
        <span class="property-amenities-tag"><%= property.garage ? "âœ… Garage" : "âŒ Garage" %></span>
        </div>

    </div>
  </div>

    <!-- Bottom section: link-->
    <div style="display: flex; justify-content: space-between; padding-top: 15px; margin-top: 10px; border-top: 1px solid #f0f0f0;">
    <div style="display: flex; align-items: center;">
    <div class="url-link-to" style="font-size: 14px; text-decoration: none;">
    <%= link_to "ğŸ”— by #{collection.user.first_name} on", property.url, style: "text-decoration: none; color: #666666;", target: "_blank" %>
    <span style="margin-left: 5px; color: #666666; font-size: 14px;"><%= property.created_at.strftime("%b %d, %H:%M") %></span>
    </div>
    </div>

    <!-- Bottom section: property comments -->
    <div class="property-comments-button" style="display: flex; align-items: center;">
    <a href="#">
    <span class="comments-icon">ğŸ’¬</span> 3 comments </a>
    </div>


  </div>
    <%= render 'shared/show/edit_property_modal', collection: collection, property: property %>
</div>
