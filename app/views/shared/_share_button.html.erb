
<!--app/views/shared/_share_button.html.erb-->

<button
  class="share-button"
  data-bs-toggle="modal"
  data-bs-target="#shareCollectionModal-<%= collection.id %>"
  style="background-color: white; color:rgb(241, 132, 48); width: 40px; height: 40px; border: 1px solid #ddd; border-radius: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer; margin-left: 8px;">
  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
    <path d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z" />
  </svg>
</button>

<!-- Share Modal -->
<div class="modal fade" id="shareCollectionModal-<%= collection.id %>" tabindex="-1" aria-labelledby="shareModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="shareModalLabel"> Share <span style="color: #F2994A;"><%= collection.name %></span></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="share-link-container">
          <input type="text" class="form-control" id="collectionShareLink" readonly value="<%= collection_url(collection) %>">
          <button class="btn btn-secondary copy-link-btn" onclick="copyLink()">Copy Link</button>
        </div>

        <div class="share-options">
          <a href="https://wa.me/?text=Check%20out%20this%20collection:%20<%= collection_url(collection) %>"
             target="_blank"
             class="share-option whatsapp">
            <i class="fab fa-whatsapp"></i> WhatsApp
          </a>

          <a href="sms:?body=Check%20out%20this%20collection:%20<%= collection_url(collection) %>"
             class="share-option sms">
            <i class="fas fa-comment-dots"></i> SMS
          </a>

          <a href="mailto:?subject=Check%20out%20this%20Collection&body=Check%20out%20this%20collection:%20<%= collection_url(collection) %>"
             class="share-option email">
            <i class="fas fa-envelope"></i> Email
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function copyLink() {
  const linkInput = document.getElementById('collectionShareLink');
  linkInput.select();
  document.execCommand('copy');

  const copyBtn = document.querySelector('.copy-link-btn');
  copyBtn.textContent = 'Copied!';
  setTimeout(() => {
    copyBtn.textContent = 'Copy Link';
  }, 2000);
}
</script>
